<div class="container-fluid">
    <div class="d-flex align-items-center mt-2">
        <div class="m-2">
            <div class="h-size"><em class="fa fa-user"></em> <strong> Candidates Drop Report</strong></div>
        </div>
        <div class="flex-fill"></div>
        <div class="m-2"></div>
        <div class="m-3"></div>
    </div>
    <div class="row">
        <div class="form-group col-md-4">
            <label for="stage">Stage <span class="color-red"></span></label>
            <select id="stage" [(ngModel)]="stageModel" name="stage" class="form-control" name="stage">
                <option value="" disabled selected>Select Stage</option>
                <option *ngFor="let data of stageList" [value]="data">
                    {{data}}</option>
            </select>

        </div>
        <div class="form-group col-md-4" *ngIf="stageModel == 'Dropped'">
            <label for="reason">Reason to Drop <span class="color-red"></span></label>
            <select id="reason" [(ngModel)]="reasonModel" name="reason" class="form-control" name="reason">
                <option value="" disabled selected>Select Reason</option>
                <option *ngFor="let data of dropList" [value]="data">
                    {{data}}</option>
            </select>
            <!-- <ng-multiselect-dropdown [placeholder]="'Select Reason'" [settings]="dropdownSettingsDropReason"
                [data]="dropList" [(ngModel)]="selectedItemsDropReason" (onSelect)="onItemSelectDropReason($event)"
                (onDeSelect)="OnDropReasonItemDeSelect($event)" (onSelectAll)="onSelectAllDropReason($event)">
            </ng-multiselect-dropdown> -->
        </div>
        <div class="form-group col-md-4">
            <label>Created Start Date</label>
            <input type="text" [(ngModel)]="startDate" bsDatepicker placeholder="Please Select Start Date" readonly
                [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }" bsDatepicker
                (bsValueChange)="onStartDateValueChange($event)" placement="bottom"
                class="text form-control pull-top-5 read-only" maxlength="50" />
        </div>
        <div class="form-group col-md-4">
            <label>Created End Date</label>
            <input type="text" [(ngModel)]="endDate" bsDatepicker placeholder="Please Select End Date"
                [minDate]="selectedStartDate" readonly [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }"
                bsDatepicker (bsValueChange)="onEndDateValueChange($event)" placement="bottom"
                class="text form-control pull-top-5 read-only" maxlength="50" />
        </div>
        <div class="form-group col-md-4 padding-top-25">
            <button type="button" id="search" class="btn btn-primary btn-sm" (click)="searchFilter()">Search</button>
            &nbsp;
            <button type="button" id="search" class="btn btn-warning btn-sm" (click)="clear()">Clear</button>
            &nbsp;&nbsp;
            <button title="Export" class="btn btn-primary btn-sm" mat-icon-button [matMenuTriggerFor]="menu"
                aria-label="Menu">
                <i class='fas fa-file-export'></i> Export
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item type="button" class="btn btn-labeled btn-sm" (click)="exportTable('PDF')">
                    <span class="btn-label"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></span> Export To
                    PDF</button>
                <button mat-menu-item type="button" class="btn btn-labeled btn-sm" (click)="exportTable('EXCEL')">
                    <span class="btn-label"><i class="fa fa-file-excel-o" aria-hidden="true"></i></span> Export To
                    Excel</button>
            </mat-menu>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <table class="table table-bordered table-hover table-sm">
                <thead class="t-head">
                    <tr>
                        <th *ngFor="let head of headers"><a>{{head}}</a></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf='candidateList && candidateList.length == 0'>
                        <td colspan="11">
                            <div class="align-center">No Records Found.</div>
                        </td>
                    </tr>
                    <tr
                        *ngFor="let data of candidateList | paginate: { itemsPerPage: numberOfEntitesToShow, currentPage: p } ; let i=index;">
                        <td><a class="advance">{{data.candidateName | uppercase}}</a></td>
                        <td>
                            <span *ngFor="let r of data.reasonsToDrop">
                                <li>{{r}}</li>
                            </span>
                        </td>
                        <td>{{data.dropDate | date:'dd-MM-yyyy'}}</td>
                        <td>{{data.dropDescription}}</td>
                        <td>{{data.currentCompany}}</td>
                        <td>{{data.noticePeriod}}</td>
                        <td>{{data.currentSalary}}</td>
                        <td>{{data.expectedSalary}}</td>
                        <td>{{data.candidateOwner}}</td>
                        <td>{{data.createdDate | date:'dd-MM-yyyy'}}</td>
                        <td>{{data.candidateStage}}</td>
                    </tr>
                </tbody>
            </table>
            <div class="row">
                <div class="col-md-6" *ngIf="candidateList > 0">
                    <pagination-controls (pageChange)="p = $event"></pagination-controls>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal alert-modal fade" id="show-team-member-modal" role="dialog" style="display: none;">
    <div class="modal-dialog modal-md">
        <div class="modal-content model">
            <div class="modal-header " id="msg_header">
                <h4 class="modal-title">Team Members</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12">
                        <table class="table table-striped table-bordered">
                            <thead class="t-head">
                                <tr>
                                    <th *ngFor="let head of teamMembersHeader"><a>{{head}}</a></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngIf='teamMembersList && teamMembersList.length == 0'>
                                    <td colspan="3">
                                        <div class="align-center">No Records Found.</div>
                                    </td>
                                </tr>
                                <tr *ngFor="let member of teamMembersList">
                                    <td>{{member.name}}</td>
                                    <td>{{member.displayName}}</td>
                                    <td>{{member.lastActive}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>