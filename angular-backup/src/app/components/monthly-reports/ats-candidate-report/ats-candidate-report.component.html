<div class="container-fluid">
    <div class="d-flex align-items-center mt-2">
        <div class="m-2">
            <div class="h-size"><em class="fa fa-user"></em> <strong> Candidates Report</strong></div>
        </div>
        <div class="flex-fill"></div>
        <div class="m-2"></div>
        <div class="m-3"></div>
    </div>
    <div class="row">
        <div class="form-group col-md-4">
            <label for="stage">Stage <span class="color-red"></span></label>
            <ng-multiselect-dropdown [placeholder]="'Select Stage'" [settings]="dropdownSettingsStage"
                [data]="stageList" [(ngModel)]="selectedItemsStage" (onSelect)="onItemSelectStage($event)"
                (onDeSelect)="OnStageItemDeSelect($event)" (onSelectAll)="onSelectAllStage($event)">
            </ng-multiselect-dropdown>
        </div>
        <div class="form-group col-md-4">
            <label for="contract">Sourcing channel <span class="color-red"></span></label>
            <select class="form-control" id="technology" [(ngModel)]="source">
                <option value=null disabled>Please Select Source</option>
                <option *ngFor="let source of sources" [value]="source">
                    {{source}}
                </option>
            </select>
        </div>
        <div class="form-group col-md-4" *ngIf="source === 'Referral'">
            <label for="user">Referrer <span class="color-red"></span></label>
            <select class="form-control" id="technology" [(ngModel)]="referrer">
                <option value=null disabled>Please Select Referrer</option>
                <option *ngFor="let data of referralList" [value]="data.id">
                    {{data.name}}
                </option>
            </select>
        </div>
        <div class="form-group col-md-4">
            <label for="user">Candidate Owner<span class="color-red"></span></label>
            <ng-multiselect-dropdown [placeholder]="'Select Candidate Owner'" [settings]="dropdownSettingsUser"
                [data]="userList" [(ngModel)]="selectedItemsUser" (onSelect)="onItemSelectUser($event)"
                (onDeSelect)="OnUserItemDeSelect($event)" (onSelectAll)="onSelectAllUser($event)">
            </ng-multiselect-dropdown>
        </div>
        <div class="form-group col-md-4">
            <label>Created Start Date</label>
            <input type="text" [(ngModel)]="startDate" bsDatepicker placeholder="Please Select Start Date" readonly
                [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }" bsDatepicker
                (bsValueChange)="onStartDateValueChange($event)" placement="bottom"
                class="text form-control pull-top-5 read-only" maxlength="50" />
        </div>
        <div class="form-group col-md-4">
            <label>Created End Date</label>
            <input type="text" [(ngModel)]="endDate" bsDatepicker placeholder="Please Select End Date"
                [minDate]="selectedStartDate" readonly [bsConfig]="{ isAnimated: true, dateInputFormat: 'DD-MM-YYYY' }"
                bsDatepicker (bsValueChange)="onEndDateValueChange($event)" placement="bottom"
                class="text form-control pull-top-5 read-only" maxlength="50" />
        </div>
        <div class="form-group col-md-4 padding-top-25">
            <button type="button" id="search" class="btn btn-primary btn-sm" (click)="searchFilter()">Search</button>
            &nbsp;
            <button type="button" id="search" class="btn btn-warning btn-sm" (click)="clear()">Clear</button>
            &nbsp;&nbsp;
            <button title="Export" class="btn btn-primary btn-sm" mat-icon-button [matMenuTriggerFor]="menu"
                aria-label="Menu">
                <i class='fas fa-file-export'></i> Export
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item type="button" class="btn btn-labeled btn-sm" (click)="exportTable('PDF')">
                    <span class="btn-label"><i class="fa fa-file-pdf-o" aria-hidden="true"></i></span> Export To
                    PDF</button>
                <button mat-menu-item type="button" class="btn btn-labeled btn-sm" (click)="exportTable('EXCEL')">
                    <span class="btn-label"><i class="fa fa-file-excel-o" aria-hidden="true"></i></span> Export To
                    Excel</button>
            </mat-menu>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div class="table-responsive">
                <table class="table table-bordered table-hover table-sm">
                <thead class="t-head">
                    <tr>
                        <th *ngFor="let head of headers"><a>{{head}}</a></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngIf='candidateList && candidateList.length == 0'>
                        <td colspan="11">
                            <div class="align-center">No Records Found.</div>
                        </td>
                    </tr>
                    <tr
                        *ngFor="let data of candidateList | paginate: { itemsPerPage: numberOfEntitesToShow, currentPage: p } ; let i=index;">
                        <td>{{showingFrom+i}}</td>
                        <td>{{data.candidateId.createdDate | date:'dd-MM-yyyy'}}</td>
                        <td><a class="advance">{{data.candidateId.candidateName | uppercase}}</a></td>
                        <td><a class="advance">{{data.jobId.positionName | uppercase}}</a></td>
                        <td>{{data.candidateId.createdBy}}</td>
                        <!-- <td>{{data.candidateId.candidateReference}}</td> -->
                        <!-- <td>{{data.candidateId.currentPosition}}</td> -->
                        <!-- <td>{{data.candidateId.currentCompany}}</td> -->
                        <td><a class="advance">{{data.candidateStage | uppercase}}</a></td>
                        <!-- <td><a class="advance">{{data.jobId.positionName | uppercase}}</a></td> -->
                        <td>{{data.candidateId.candidateLocation}}</td>
                        <td>{{data.candidateId.noticePeriod}}</td>
                        <td>{{data.candidateId.currentSalary}}</td>
                        <td>{{data.candidateId.expectedSalary}}</td>

                    </tr>
                </tbody>
            </table>
            </div>
            <div class="row">
                <div class="col-md-6 col-sm-6 col-6"><span class="show-entry">Showing
                    <span>{{showingFrom}} to {{showingTo}} of {{totalElements}} entries</span></span>&nbsp;
                </div>
                <div class="col-md-6" *ngIf="candidateList.length > 0">
                    <pagination-controls (pageChange)="onPageChange($event)"></pagination-controls>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal alert-modal fade" id="show-team-member-modal" role="dialog" style="display: none;">
    <div class="modal-dialog modal-md">
        <div class="modal-content model">
            <div class="modal-header " id="msg_header">
                <h4 class="modal-title">Team Members</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-12">
                        <table class="table table-striped table-bordered">
                            <thead class="t-head">
                                <tr>
                                    <th *ngFor="let head of teamMembersHeader"><a>{{head}}</a></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngIf='teamMembersList && teamMembersList.length == 0'>
                                    <td colspan="3">
                                        <div class="align-center">No Records Found.</div>
                                    </td>
                                </tr>
                                <tr *ngFor="let member of teamMembersList">
                                    <td>{{member.name}}</td>
                                    <td>{{member.displayName}}</td>
                                    <td>{{member.lastActive}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>