<div class="modal fade common-model" id="myModal-filter">
    <div class="modal-dialog modal-xl">
        <div class="modal-content model">
            <!-- Modal Header -->
            <div class="modal-header">
                <h2 class="modal-title align-center" style="margin-left: 50px;">Preview and Generate Payslip </h2>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-5">
                        <div *ngIf="role!='ROLE_EMPLOYEE'" class="title-headers">
                            <h2><em class="fas fa-filter"></em> Master Filter</h2>
                            <button type="button" (click)="applyFilter()"
                                class="btn btn-secondary btn-sm btn-header ml-40">Apply
                                Filter</button>
                                <button type="button" class="btn btn-secondary btn-sm btn-header"
                                (click)="resetFilter()">Clear Filter</button>
                        </div>
                        <div>
                            <table class="model-tbl mt-10">
                                <tr>
                                    <td>
                                        <label>Year <span class="color-red">*</span> </label>
                                    </td>
                                    <td class="td-width">
                                        <select class="dropdown-m-2 q-style" name="leaveYear" [(ngModel)]="selectedYear" (change)="selected()">
                                            <option value="" disabled>Select Year</option>
                                            <option *ngFor="let data of years" [value]="data.leaveYear">{{data.leaveYear}}</option>
                                        </select>
                                        <div *ngIf="YearValidationText != ''" class="color-red pull-left-5">&nbsp;<strong>{{YearValidationText}}</strong></div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <label>Month <span class="color-red">*</span> </label>
                                    </td>
                                    <td class="td-width">
                                        <!-- <select multiple class="dropdown-m-2 q-month-style" name="month" [(ngModel)]="selectedMonth"
                                            (change)="selectedMonthForPayslip()">
                                            <option value='' [disabled]="true">Select Month</option>
                                            <option  *ngFor="let month of months" [value]="month">{{month}}</option>
                                        </select> -->
                                        <ng-multiselect-dropdown [placeholder]="'Please Select Month'" [settings]="dropdownSettings"
                                        [data]="filteredMonths" [(ngModel)]="selectedItems" [ngModelOptions]="{standalone: true}"
                                        (onSelect)="selectedMonthForPayslip()" (onSelectAll)="onSelectAll($event)"
                                        (onDeSelectAll)="onDeSelectAll($event)" (onDeSelect)="onItemDeSelect($event)">
                                        </ng-multiselect-dropdown>
                                        <div *ngIf="monthValidationText != ''" class="color-red pull-left-5">&nbsp;<strong>{{monthValidationText}}</strong></div>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Branch</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Branch'"
                                            [settings]="dropdownSettingsBranch" [data]="branchDetailsList"
                                            [(ngModel)]="selectedItemsBranch" (onSelect)="onItemSelectBranch($event)"
                                            (onSelectAll)="onSelectAllBranch($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Grade</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Grade'"
                                            [settings]="dropdownSettingsGrade" [data]="gradeList"
                                            [(ngModel)]="selectedItemsGrade" (onSelect)="onItemSelectGrade($event)"
                                            (onSelectAll)="onSelectAllGrade($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Department</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Department'"
                                            [settings]="dropdownSettingsDepartment" [data]="departmentMasterList"
                                            [(ngModel)]="selectedItemsDepartment"
                                            (onSelect)="onItemSelectDepartment($event)"
                                            (onSelectAll)="onSelectAllDepartment($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Designation</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Designation'"
                                            [settings]="dropdownSettingsDesignation" [data]="designationList"
                                            [(ngModel)]="selectedItemsDesignation"
                                            (onSelect)="onItemSelectDesignation($event)"
                                            (onSelectAll)="onSelectAllDesignation($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Cost Center</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Cost Center'"
                                            [settings]="dropdownSettingsCostCenter" [data]="costCenterMasterList"
                                            [(ngModel)]="selectedItemsCostCenter"
                                            (onSelect)="onItemSelectCostCenter($event)"
                                            (onSelectAll)="onSelectAllCostCenter($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Project</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Project'"
                                            [settings]="dropdownSettingsProject" [data]="projectMasterList"
                                            [(ngModel)]="selectedItemsProject" (onSelect)="onItemSelectProject($event)"
                                            (onSelectAll)="onSelectAllProject($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Category</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Category'"
                                            [settings]="dropdownSettingsCategory" [data]="categoryMasterList"
                                            [(ngModel)]="selectedItemsCategory"
                                            (onSelect)="onItemSelectCategory($event)"
                                            (onSelectAll)="onSelectAllCategory($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr>
                                <!-- <tr *ngIf="role!='ROLE_EMPLOYEE'">
                                    <td>
                                        <label>Bank</label>
                                    </td>
                                    <td class="td-width">
                                        <ng-multiselect-dropdown [placeholder]="'Select Bank'"
                                            [settings]="dropdownSettingsBank" [data]="bankMasterList"
                                            [(ngModel)]="selectedItemsBank" (onSelect)="onItemSelectBank($event)"
                                            (onSelectAll)="onSelectAllBank($event)">
                                        </ng-multiselect-dropdown>
                                    </td>
                                </tr> -->
                            </table>
                        </div>
                    </div>
                    <div class="col-md-7">
                        <div *ngIf="role!='ROLE_EMPLOYEE'">
                            <input type="text" class="form-control" [(ngModel)]="searchValue" placeholder="Search by Employee"
                                (ngModelChange)="applyFilter()">
                        </div>
                        <br>
                        <div class="emp-scroll">
                            <label *ngIf="role!='ROLE_EMPLOYEE'"><strong>Please select employee(s)</strong></label>
                            <table>
                                <tr>
                                    <th class="align-center">
                                        <input type="checkbox" class="select-all" name="allStudents"
                                            [value]="employeeList" (change)="selectAll($event)">
                                    </th>
                                    <th>
                                        <label class="s-lable"> Emp Code</label>
                                    </th>
                                    <th>
                                        <label class="s-lable"> Emp Name</label>
                                    </th>
                                </tr>
                                <tr *ngIf="toggleLoader">
                                    <td colspan="2">
                                        <img src="./assets/images/loader-icon.gif" class="loader-margin img-responsive"
                                            alt="loading....">
                                    </td>
                                </tr>
                                <tr *ngFor="let emp of employeeList">
                                    <td class="align-center">
                                        <input type="checkbox" class="status-check select-all" [checked]="emp.selected"
                                            (change)="onClickCheckBox(emp.employeeId)" name="status">
                                    </td>
                                    <td>{{emp.employeeCode}} </td>
                                    <td>{{emp.fullName}}</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Modal footer -->
            <div *ngIf="validationText != ''" class="color-red pull-left-5"><strong>{{validationText}}</strong></div>
            <div *ngIf="monthAndYearValidationText != ''" class="color-red pull-left-5"><strong>{{monthAndYearValidationText}}</strong></div>
            <div  class="modal-header">
                <div class="col-md-6 pull-left" style="padding-left: 0px;">
                    <button *ngIf="role!='ROLE_EMPLOYEE'" type="button" class="btn-primary button" [disabled]="previewProcessing" (click)="generatePayslip()">Preview
                        Payslip <i class="fa fa-spinner fa-spin" *ngIf="previewProcessing" style="font-size:19px"></i></button>&nbsp;
                    <button *ngIf="role=='ROLE_EMPLOYEE'" type="button" class="btn-primary button" [disabled]="viewProcessing" (click)="generatedPayslip()">View Generated
                            Payslip <i class="fa fa-spinner fa-spin" *ngIf="viewProcessing" style="font-size:19px"></i></button>&nbsp;
                    <button *ngIf="role!='ROLE_EMPLOYEE'" type="button" class="btn-primary button" [disabled]="generateProcessing" (click)="savePayslip()">Generate 
                        Payslip <i class="fa fa-spinner fa-spin" *ngIf="generateProcessing" style="font-size:19px"></i></button>
                   
                </div>
                <div class="col-md-6 pull-right" style="padding-right: 0px;">
                    <label class="s-lable"> Selected employee count is : {{selectedEmployeeCount}}</label>
                    <button type="button" class="button btn-danger btn-style" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</div>